<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Unicode Style Converter (Auto + Manual)</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    #inputBox {
        width: 100%;
        min-height: 180px;
        border: 1px solid #aaa;
        padding: 10px;
        font-size: 16px;
    }
    textarea {
        width: 100%;
        height: 180px;
        font-size: 16px;
        margin-top: 15px;
    }
    select, button {
        padding: 8px 14px;
        font-size: 15px;
        margin-top: 10px;
        margin-right: 10px;
    }
</style>
</head>
<body>

<h2>Unicode Style Converter</h2>

<p>
    <b>Input (rich text):</b><br>
    Use <b>Ctrl+B</b> / <i>Ctrl+I</i> etc. to format text here.  
</p>

<div id="inputBox" contenteditable="true">
    Type or paste text hereâ€¦ make some <b>bold</b>, some <i>italic</i>, some <b><i>both</i></b>.
</div>

<p>
    <label for="modeSelect"><b>Output mode:</b></label>
    <select id="modeSelect">
        <option value="auto">Auto (detect from input formatting)</option>
        <option value="normal">Normal (no style, just bullets â†’ ðŸ”¸)</option>
        <option value="bold">Force Bold</option>
        <option value="italic">Force Italic</option>
        <option value="bolditalic">Force Bold + Italic</option>
    </select>

    <button onclick="convert()">Convert</button>
</p>

<h3>Output (plain Unicode text):</h3>
<textarea id="outputText" readonly></textarea>

<script>
// --- Mapping based on your Python script ---------------------------

const sansBold = {
'A':'ð—”','B':'ð—•','C':'ð—–','D':'ð——','E':'ð—˜','F':'ð—™','G':'ð—š','H':'ð—›','I':'ð—œ','J':'ð—','K':'ð—ž','L':'ð—Ÿ','M':'ð— ','N':'ð—¡',
'O':'ð—¢','P':'ð—£','Q':'ð—¤','R':'ð—¥','S':'ð—¦','T':'ð—§','U':'ð—¨','V':'ð—©','W':'ð—ª','X':'ð—«','Y':'ð—¬','Z':'ð—­',
'a':'ð—®','b':'ð—¯','c':'ð—°','d':'ð—±','e':'ð—²','f':'ð—³','g':'ð—´','h':'ð—µ','i':'ð—¶','j':'ð—·','k':'ð—¸','l':'ð—¹','m':'ð—º','n':'ð—»',
'o':'ð—¼','p':'ð—½','q':'ð—¾','r':'ð—¿','s':'ð˜€','t':'ð˜','u':'ð˜‚','v':'ð˜ƒ','w':'ð˜„','x':'ð˜…','y':'ð˜†','z':'ð˜‡',
'0':'ðŸ¬','1':'ðŸ­','2':'ðŸ®','3':'ðŸ¯','4':'ðŸ°','5':'ðŸ±','6':'ðŸ²','7':'ðŸ³','8':'ðŸ´','9':'ðŸµ'
};

const sansItalic = {
'A':'ð˜ˆ','B':'ð˜‰','C':'ð˜Š','D':'ð˜‹','E':'ð˜Œ','F':'ð˜','G':'ð˜Ž','H':'ð˜','I':'ð˜','J':'ð˜‘','K':'ð˜’','L':'ð˜“','M':'ð˜”','N':'ð˜•',
'O':'ð˜–','P':'ð˜—','Q':'ð˜˜','R':'ð˜™','S':'ð˜š','T':'ð˜›','U':'ð˜œ','V':'ð˜','W':'ð˜ž','X':'ð˜Ÿ','Y':'ð˜ ','Z':'ð˜¡',
'a':'ð˜¢','b':'ð˜£','c':'ð˜¤','d':'ð˜¥','e':'ð˜¦','f':'ð˜§','g':'ð˜¨','h':'ð˜©','i':'ð˜ª','j':'ð˜«','k':'ð˜¬','l':'ð˜­','m':'ð˜®','n':'ð˜¯',
'o':'ð˜°','p':'ð˜±','q':'ð˜²','r':'ð˜³','s':'ð˜´','t':'ð˜µ','u':'ð˜¶','v':'ð˜·','w':'ð˜¸','x':'ð˜¹','y':'ð˜º','z':'ð˜»'
};

const sansBoldItalic = {
'A':'ð˜¼','B':'ð˜½','C':'ð˜¾','D':'ð˜¿','E':'ð™€','F':'ð™','G':'ð™‚','H':'ð™ƒ','I':'ð™„','J':'ð™…','K':'ð™†','L':'ð™‡','M':'ð™ˆ','N':'ð™‰',
'O':'ð™Š','P':'ð™‹','Q':'ð™Œ','R':'ð™','S':'ð™Ž','T':'ð™','U':'ð™','V':'ð™‘','W':'ð™’','X':'ð™“','Y':'ð™”','Z':'ð™•',
'a':'ð™–','b':'ð™—','c':'ð™˜','d':'ð™™','e':'ð™š','f':'ð™›','g':'ð™œ','h':'ð™','i':'ð™ž','j':'ð™Ÿ','k':'ð™ ','l':'ð™¡','m':'ð™¢','n':'ð™£',
'o':'ð™¤','p':'ð™¥','q':'ð™¦','r':'ð™§','s':'ð™¨','t':'ð™©','u':'ð™ª','v':'ð™«','w':'ð™¬','x':'ð™­','y':'ð™®','z':'ð™¯'
};

// bullet replacement like your Python convert_char
const bulletChars = ['â€¢', 'â–ª', 'â—', 'â—¦'];

function convertChar(c, bold, italic) {
    if (bulletChars.includes(c)) {
        return 'ðŸ”¸';
    }
    if (bold && italic) return sansBoldItalic[c] || c;
    if (bold) return sansBold[c] || c;
    if (italic) return sansItalic[c] || c;
    return c;
}

// Helpers to detect formatting from DOM
function isBoldElement(el) {
    const style = window.getComputedStyle(el);
    const fw = style.fontWeight;
    // fw can be "bold" or a number string like "700"
    return fw === "bold" || parseInt(fw, 10) >= 600;
}

function isItalicElement(el) {
    const style = window.getComputedStyle(el);
    return style.fontStyle === "italic" || style.fontStyle === "oblique";
}

function convert() {
    const input = document.getElementById("inputBox");
    const mode = document.getElementById("modeSelect").value;
    let output = "";

    if (mode === "auto") {
        // Walk text nodes and use the formatting of their parent
        const walker = document.createTreeWalker(input, NodeFilter.SHOW_TEXT, null, false);

        while (walker.nextNode()) {
            const textNode = walker.currentNode;
            const parent = textNode.parentElement || input;

            const bold = isBoldElement(parent);
            const italic = isItalicElement(parent);

            for (let c of textNode.nodeValue) {
                output += convertChar(c, bold, italic);
            }
        }
    } else {
        // Global style: ignore formatting, just apply the selected style to all characters
        const text = input.innerText;  // plain text from editor
        let bold = false, italic = false;

        if (mode === "bold") { bold = true; italic = false; }
        else if (mode === "italic") { bold = false; italic = true; }
        else if (mode === "bolditalic") { bold = true; italic = true; }
        else if (mode === "normal") { bold = false; italic = false; }

        for (let c of text) {
            output += convertChar(c, bold, italic);
        }
    }

    document.getElementById("outputText").value = output;
}
</script>

</body>
</html>
